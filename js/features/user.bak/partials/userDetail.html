<div class="group_detail">
	<div class="group">
		<div class="group-left">
			<div class="user-container">
				<div class="info-box">
					<div class="u-header">
						<div class="h-bor" ng-class="{'red': userItem.banned, 'green': !userItem.banned}">
                            <image-with-fallback url="{{userItem.avatar}}" default-url="../img/head.png"></image-with-fallback>
                        </div>
					</div>
					<div class="info-line">
                        <span class="bl-txt">{{userItem.name}}</span><span class="detail-tag" ng-class="{'grey': !userItem.authorized, 'red': userItem.authorized}">认</span>
                    </div>
                    <div class="info-line">
                        <span class="grey-num">{{userItem.phone}}</span>
                    </div>
                    <div class="info-line">
                        <span class="grey-num">{{userItem.email}}</span>
                    </div>
				</div>
				<div class="info-box">
					<div class="info-line f-l">
						<span class="n-icon ic-vip"></span><span class="l-tit">有效会员卡（{{userItem.cards.length}}张）</span>
					</div>
					<div class="info-line f-l">
                        <div class="card-m" ng-repeat="item in userItem.cards" style="background-image: url({{item.background}});">
                            <p class="c-n"><span>{{item.name}}</span></p>
                            <p class="c-d"><span>至： {{item.end_date | date: 'yyyy-MM-dd'}}</span></p>
                        </div>
                        <p ng-if="userItem.cards.length == 0" class="c-e">暂无有效会员卡！</p>
					</div>
				</div>
                <div class="info-box">
                    <div class="info-line f-l">
                        <span class="n-icon ic-group"></span><span class="l-tit">所属普通用户组（{{userItem.commonGroups.length}}个）</span>
                    </div>
                    <div class="info-line f-l">
                        <ul>
                            <li ng-repeat="item in userItem.commonGroups">
                                <div>{{item.name}}</div>
                            </li>
                        </ul>
                        <p ng-if="userItem.commonGroups.length == 0" class="c-e">暂无用户组！</p>
                    </div>
                </div>
				
			</div>
		</div>

		<div class="space-bot f-right">
            <div class="space-b-head over-f">
                <div class="b-box" ng-click="switchTab('userInfo')" ng-class="{on: tabType === 'userInfo'}">
                    <div class="b-name">用户信息备注
                        <div class="b-line"></div>
                    </div>
                </div>
                <div class="b-box" ng-click="switchTab('space')" ng-class="{on: tabType === 'space'}">
                    <div class="b-name">秒租订单
                        <div class="b-line"></div>
                    </div>
                </div>
                <div class="b-box" ng-click="switchTab('event')" ng-class="{on: tabType === 'event'}">
                    <div class="b-name">活动订单
                        <div class="b-line"></div>
                    </div>
                </div>
                <div class="b-box" ng-click="switchTab('agreement')" ng-class="{on: tabType === 'agreement'}">
                    <div class="b-name">合同及申请
                        <div class="b-line"></div>
                    </div>
                </div>
                <div class="b-box" ng-click="switchTab('longrent')" ng-class="{on: tabType === 'longrent'}">
                    <div class="b-name">长租申请
                        <div class="b-line"></div>
                    </div>
                </div>
                <div class="b-box" ng-click="switchTab('invoice')" ng-class="{on: tabType === 'invoice'}">
                    <div class="b-name">发票记录
                        <div class="b-line"></div>
                    </div>
                </div>
                <div class="b-box" ng-click="switchTab('membership')" ng-class="{on: tabType === 'membership'}">
                    <div class="b-name">会员卡订单
                        <div class="b-line"></div>
                    </div>
                </div>
            </div>
            <div class="space-b-con">
                <div class="s-info-page p25" ng-if="tabType === 'userInfo' && loaded">
                    <div class="u-i-line">
                        <span class="tit">用户信息备注</span>
                        <span class="link-txt" ng-click="setEditFlag(true)" ng-if="!editFlag">编辑</span>
                        <span class="link-txt tit" ng-if="editFlag" ng-click="saveUserInfo()">保存</span> 
                        <span class="link-txt" ng-if="editFlag" ng-click="setEditFlag(false)">取消</span>  
                    </div>
                    <div class="u-i-line" ng-class="{'edit-l': editFlag}">
                        <div class="half-line">
                            <span class="i-name">姓名</span>
                            <span ng-if="!editFlag">{{userInfoOptions.name}}</span>
                            <input type="text" class="input-box" ng-model="userInfoOptions.name" ng-if="editFlag">
                        </div>
                        <div class="half-line">
                            <span class="i-name">性别</span>
                            <span ng-if="!editFlag && userInfoOptions.sex == 'male'">男</span>
                            <span ng-if="!editFlag && userInfoOptions.sex == 'female'">女</span>
                            <div class="rent-cat in-line" ng-if="editFlag">
                                <div class="rent-item" ng-repeat="item in gender" ng-class="{on: item.selected}">
                                    <div class="check" ng-click="checkGender(item)"></div>
                                    <span ng-bind="item.name"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="u-i-line" ng-class="{'edit-l': editFlag}">
                        <div class="half-line">
                            <span class="i-name">手机</span>
                            <span ng-if="!editFlag">{{userInfoOptions.phone}}</span>
                            <input type="text" class="input-box" ng-model="userInfoOptions.phone" ng-if="editFlag">
                        </div>
                        <div class="half-line">
                            <span class="i-name">邮箱</span>
                            <span ng-if="!editFlag">{{userInfoOptions.email}}</span>
                            <input type="text" class="input-box" ng-model="userInfoOptions.email" ng-if="editFlag">
                        </div>
                    </div>
                    <div class="u-i-line" ng-class="{'edit-l': editFlag}">
                        <div class="half-line">
                            <span class="i-name">国籍</span>
                            <span ng-if="!editFlag">{{userInfoOptions.nationality}}</span>
                            <input type="text" class="input-box" ng-model="userInfoOptions.nationality" ng-if="editFlag">
                        </div>
                        <div class="half-line">
                            <span class="i-name">证件及证件号</span>
                            <span ng-if="!editFlag">{{cerTypeDesc[userInfoOptions.idType.type]}} {{userInfoOptions.idNumber}}</span>
                            <sb-dropdown ng-if="editFlag" select="userInfoOptions.idType" placeholder="placeholder.all" options="certificateType"></sb-dropdown>
                            <input type="text" class="input-box short" ng-if="editFlag && userInfoOptions.idType.type" ng-model="userInfoOptions.idNumber">
                        </div>
                    </div>
                    <div class="u-i-line" ng-class="{'edit-l': editFlag}">
                        <div class="half-line">
                            <span class="i-name">语言</span>
                            <span ng-if="!editFlag">{{userInfoOptions.language}}</span>
                            <input type="text" class="input-box" ng-model="userInfoOptions.language" ng-if="editFlag">
                        </div>
                        <div class="half-line">
                            <span class="i-name">生日</span>
                            <span ng-if="!editFlag">{{userInfoOptions.birthday | date: 'yyyy-MM-dd'}}</span>
                            <div class="date_input user-i" ng-if="editFlag">
                                <input type="text" ng-model="userInfoOptions.birthday" data-date-format="yyyy-MM-dd"  data-autoclose="1" bs-datepicker>
                                <span><i class="fa fa-calendar"></i></span>
                            </div>
                        </div>
                    </div>
                    <div class="u-i-line" ng-class="{'edit-l': editFlag}">
                        <div class="half-line">
                            <span class="i-name">公司</span>
                            <span ng-if="!editFlag">{{userInfoOptions.companyName}}</span>
                            <input type="text" class="input-box" ng-model="userInfoOptions.companyName" ng-if="editFlag">
                        </div>
                        <div class="half-line">
                            <span class="i-name">职位</span>
                            <span ng-if="!editFlag">{{userInfoOptions.position}}</span>
                            <input type="text" class="input-box" ng-model="userInfoOptions.position" ng-if="editFlag">
                        </div>
                    </div>
                    <div class="u-i-line" ng-class="{'edit-l': editFlag}">
                        <span class="i-name fix-w">备注</span>
                        <div class="tarea-b">
                            <span ng-if="!editFlag">{{userInfoOptions.comment}}</span>
                            <textarea ng-if="editFlag" ng-model="userInfoOptions.comment"></textarea>
                        </div>
                        
                    </div>
                </div>

                <div class="s-info-page p25" ng-if="tabType === 'space'">
                    <div class="line-width info-tit">
                        <div class="line-item per32 t-left">
                            空间
                        </div>
                        <div class="line-item per19">
                            单价
                        </div>
                        <div class="line-item per15">
                            租赁/账单时间
                        </div>
                        <div class="line-item per11">
                            租赁人
                        </div>
                        <div class="line-item per11">
                            下单方式
                        </div>
                        <div class="line-item per11">
                            操作
                        </div>
                    </div>
                    <div class="space-b-box" ng-repeat="item in spaceList">
                        <div class="b-title tit-top">
                            <span class="blake-txt">订单号：{{item.order_number}}</span>
                            <span class="grey-txt" ng-if="item.sales_invoice && item.pay_channel != 'account'">({{item.product.room.building.company.name}}开票)</span>
                            <span class="grey-txt" ng-if="!item.sales_invoice && item.pay_channel != 'account'">(创合开票)</span>
                            <span class="f-right" ng-bind="item.creation_date | date: 'yyyy-MM-dd'"></span>
                        </div>
                        <div class="line-width">
                            <div class="line-item per32 t-left">
                                <div class="item-con">
                                    <div class="p-w-t">
                                        <div class="p-p">
                                            <img ng-src="{{item.product_info.room.attachment[0].attachment_id.content}}">
                                        </div>
                                        <div class="p-t">
                                            <div class="p-t-top hover" ng-click="seeRoomDetail(item.product_info)">
                                                {{item.product_info.room.city.name}}, {{item.product_info.room.building.name}}, {{item.product_info.room.name}}<span ng-if="item.product_info.room.type == 'fixed'">，座位号{{item.product_info.room.seat.seat_number}}</span>
                                            </div>
                                            <div class="p-t-bot">
                                                <span class="detail-tag red" ng-if="item.product.room.type !== 'longterm'">秒</span>
                                                <span class="detail-tag ora" ng-if="item.product.room.type === 'longterm'">长</span>
                                                <span>{{roomTypeDesc[item.product.room.type].description}}</span>
                                                <div class="for-hover">
                                                    <div class="detail-tag green" ng-if="item.appointed">
                                                        指
                                                        <div class="u-box just-show">
                                                            <img ng-src="{{userOptions[item.appointed].avatar}}" class="u-ava">
                                                            <div class="u-nick">{{userOptions[item.appointed].name}}</div>
                                                            <div class="u-info">
                                                                <span ng-if="userOptions[item.appointed].phone">{{userOptions[item.appointed].phone}}</span>
                                                                <span ng-if="userOptions[item.appointed].email">{{userOptions[item.appointed].email}}</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <span ng-if="item.appointed">指定用户</span>
                                                </div>
                                                <div class="detail-tag blue" ng-if="item.invited_people.length > 0">邀</div>
                                                <span ng-if="item.invited_people.length > 0">邀请用户</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="line-item per19">
                                <div class="item-con">
                                    <div ng-if="item.product_info.room.type != 'fixed' && item.product_info.base_price">{{::item.product_info.base_price | currency: '￥':2 }}/{{unitDesc[item.product_info.unit_price]}}</div>
                                    <div ng-if="item.product_info.room.type == 'fixed' && !item.product_info.base_price">{{::item.product_info.room.seat.base_price | currency: '￥':2 }}/{{unitDesc[item.product_info.unit_price]}}</div>
                                    <div ng-if="item.product_info.room.type == 'fixed' && item.product_info.base_price">{{::item.product_info.base_price | currency: '￥':2 }}/{{unitDesc[item.product_info.unit_price]}}</div>

                                    <div ng-if="item.product_info.room.type_tag != 'dedicated_desk' && !item.product_info.base_price">{{::item.product_info.order.base_price | currency: '￥':2 }}/{{unitDesc[item.product_info.order.unit_price]}}</div>
                                    <div ng-if="item.product_info.room.type_tag == 'dedicated_desk' && !item.product_info.base_price">{{::item.product_info.room.seat.base_price | currency: '￥':2 }}/{{unitDesc[item.product_info.order.unit_price]}}</div>
                                </div>
                            </div>
                            <div class="line-item per15">
                                <div class="item-con">
                                    <span ng-if="item.product_info.unit_price === 'hour'">{{item.start_date | date: 'yyyy-MM-dd'}}<br/>({{item.start_date | date: 'HH:mm'}} - {{item.end_date | date: 'HH:mm'}})</span>
                                    <span ng-if="item.product_info.unit_price !== 'hour'">{{item.start_date | date: 'yyyy-MM-dd'}}<br/>{{'TO' | translate}}<br/>{{item.end_date | date: 'yyyy-MM-dd'}}</span>
                                </div>
                            </div>
                            <div class="line-item per11">
                                <div class="item-con">
                                    <span class="detail-tag d-ora" ng-if="item.payment_user_id && item.payment_user_id != item.user_id">代</span>
                                    <span ng-bind="userOptions[item.user_id].name"></span>
                                </div>
                            </div>
                            <div class="line-item per11">
                                <div class="item-con">
                                    <div ng-if="!item.type">{{'SELF_ORDER' | translate}}</div>
                                    <div ng-if="item.type">{{item.type | translate}}</div>
                                    <div ng-if="item.pay_channel"><span class="detail-tag widder t-shadow" ng-class="{'wechat': item.pay_channel == 'wx','account': item.pay_channel == 'account','offline': item.pay_channel == 'offline','alipay': item.pay_channel == 'alipay' || item.pay_channel == 'upacp','we-off': item.pay_channel == 'wx_pub'}">{{item.pay_channel | translate}}</span></div>
                                </div>
                            </div>
                            <div class="line-item per11 last-box">
                                <div class="item-con">
                                    <div class="status">
                                        <span class="status-txt" ng-if="item.status != 'cancelled' && !(item.status == 'unpaid' && item.transfer[0].transfer_status == 'verify')">{{item.status.toUpperCase() | translate}}</span>
                                        <span class="status-txt" ng-if="item.status == 'unpaid' && item.transfer[0].transfer_status == 'verify'">审核中</span>
                                        <span class="status-txt" ng-if="item.status == 'cancelled' && !item.refunded && !item.need_to_refund">已取消</span>
                                        <span class="status-txt" ng-if="item.status == 'cancelled' && item.refunded">已退款</span>
                                        <span class="status-txt" ng-if="item.status == 'cancelled' && item.need_to_refund">待退款</span>
                                        <div class="status-box">
                                            <div class="status-head">
                                                订单历史状态记录
                                            </div>
                                            <div class="status-con">
                                                <div class="status-line" ng-if="item.creation_date">
                                                    <div class="con-left">下单时间:</div>
                                                    <div class="con-right">{{item.creation_date | date: 'yyyy-MM-dd HH:mm:ss'}}</div>
                                                </div>
                                                <div class="status-line" ng-if="item.payment_date">
                                                    <div class="con-left">付款时间:</div>
                                                    <div class="con-right">{{item.payment_date | date: 'yyyy-MM-dd HH:mm:ss'}}</div>
                                                </div>
                                                <div class="status-line" ng-if="item.cancelled_date">
                                                    <div class="con-left">取消时间:</div>
                                                    <div class="con-right">{{item.cancelled_date | date: 'yyyy-MM-dd HH:mm:ss'}}</div>
                                                </div>
                                                <div class="status-line" ng-if="item.refund_processed_date">
                                                    <div class="con-left">退款时间:</div>
                                                    <div class="con-right">{{item.refund_processed_date | date: 'yyyy-MM-dd HH:mm:ss'}}</div>
                                                </div>
                                                <div class="status-line" ng-if="item.end_date && item.status === 'completed'">
                                                    <div class="con-left">订单结束时间:</div>
                                                    <div class="con-right">{{item.end_date | date: 'yyyy-MM-dd HH:mm:ss'}}</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div ng-if="item.refunded || item.refund_processed || item.status == 'cancelled' && item.transfer.length > 0 && item.transfer[0].transfer_status == 'paid' || item.status == 'cancelled' && item.pay_channel && item.pay_channel != 'offline'">({{item.discount_price | currency: '￥':2 }})</div>
                                    <div class="link-txt" ng-if="currentAdmin.spaceOrderMap[PERMISSION_SPACE_KEY + item.product.room.building.id] || currentAdmin.user.is_super_admin" ng-click="seeOrderDetail(item, 'space')">查看详情</div>
                                </div>
                            </div>
                        </div>
                        <div class="b-title tit-bot">
                            <span class="del-txt f-right" ng-if="item.price != item.discount_price">({{item.price | currency: '￥':2 }})</span>
                            <span class="blake-txt f-right" ng-if="item.status != 'paid' && item.status != 'completed' &&  !item.refund_processed && !item.need_to_refund && !item.refunded && item.transfer.length == 0 || item.status == 'unpaid' && item.transfer[0].transfer_status == 'pending'">应付款: {{::item.discount_price | currency: '￥':2 }}</span>
                            <span class="blake-txt f-right" ng-if="item.status == 'paid' || item.status == 'completed' || item.refund_processed || item.need_to_refund || item.refunded || item.status == 'unpaid' && item.transfer[0].transfer_status == 'verify' || item.status == 'cancelled' && item.transfer[0].transfer_status == 'returned'">实付款: {{::item.discount_price | currency: '￥':2 }}</span>
                        </div>
                    </div>
                    <div class="nodata" ng-if="spaceList.length <= 0 && loaded">无空间订单</div>
                </div>

                <div class="s-info-page p25" ng-if="tabType === 'agreement'">
                    <div class="line-width info-tit" ng-if="leasesList.length > 0">
                        <div class="line-item per32 t-left">
                            空间
                        </div>
                        <div class="line-item per19 t-left">
                            承租方
                        </div>
                        <div class="line-item per19">
                            租用时间段
                        </div>
                        <div class="line-item per9_5">
                            合同账单
                        </div>
                        <div class="line-item per9_5">
                            其他账单
                        </div>
                        <div class="line-item per11">
                            操作
                        </div>
                    </div>
                    <div class="space-b-box" ng-repeat="item in leasesList">
                        <div class="b-title tit-top">
                            <span class="blake-txt">合同号：{{item.serial_number}}</span>
                            <span class="f-right">{{item.confirming_date | date: 'yyyy-MM-dd'}}</span>
                        </div>
                        <div class="line-width">
                            <div class="line-item per32 t-left">
                                <div class="item-con">
                                    <div class="p-w-t">
                                        <div class="p-p">
                                            <img ng-src="{{item.product.room.attachment}}">
                                        </div>
                                        <div class="p-t">
                                            <div class="p-t-top hover" ng-click="seeRoomDetail(item.product)">
                                                {{item.product.room.city}}, {{item.product.room.building.name}}, {{item.product.room.name}}
                                            </div>
                                            <div class="p-t-bot">
                                                <span class="detail-tag red" ng-if="item.product.room.type !== 'longterm'">秒</span>
                                                <span class="detail-tag ora" ng-if="item.product.room.type === 'longterm'">长</span>
                                                <span>{{roomTypeDesc[item.product.room.type].description}}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="line-item per19 t-left">
                                <div class="item-con">
                                    <div ng-bind="item.lessee_name"></div>
                                    <div class="link-txt" ng-bind="item.lessee_email"></div>
                                    <div class="link-txt" ng-bind="item.lessee_phone"></div>
                                </div>
                            </div>
                            <div class="line-item per19">
                                <div class="item-con">
                                    <div>{{item.start_date | date: 'yyyy-MM-dd'}}</div>
                                    <div>-</div>
                                    <div>{{item.end_date | date: 'yyyy-MM-dd'}}</div>
                                </div>
                            </div>
                            <div class="line-item per9_5">
                                <div class="item-con">
                                    <div><span class="link-txt">{{item.pushed_lease_bills_amount}}</span> / <span class="link-txt">{{item.total_lease_bills_amount}}</span></div>
                                </div>
                            </div>
                            <div class="line-item per9_5">
                                <div class="item-con">
                                    <div><span class="link-txt">{{item.other_bills_amount}}</span></div>
                                </div>
                            </div>
                            <div class="line-item per11">
                                <div class="item-con">
                                    <div class="status">
                                        <span class="status-txt">{{agreementStatus[item.status]}}</span>
                                        <div class="status-box">
                                            <div class="status-head">
                                                合同历史状态记录
                                            </div>
                                            <div class="status-con">
                                                <div class="status-line" ng-if="item.change_logs.apply_date">
                                                    <div class="con-left">预约时间:</div>
                                                    <div class="con-right">{{item.change_logs.apply_date | date: 'yyyy-MM-dd HH:mm:ss'}}</div>
                                                </div>
                                                <div class="status-line" ng-if="item.change_logs.lease_conforming_date">
                                                    <div class="con-left">合同生成时间:</div>
                                                    <div class="con-right">{{item.change_logs.lease_conforming_date | date: 'yyyy-MM-dd HH:mm:ss'}}</div>
                                                </div>
                                                <div class="status-line" ng-if="item.change_logs.lease_conformed_date">
                                                    <div class="con-left">确认时间:</div>
                                                    <div class="con-right">{{item.change_logs.lease_conformed_date | date: 'yyyy-MM-dd HH:mm:ss'}}</div>
                                                </div>
                                                <div class="status-line" ng-if="item.change_logs.lease_performing_date">
                                                    <div class="con-left">生效时间:</div>
                                                    <div class="con-right">{{item.change_logs.lease_performing_date | date: 'yyyy-MM-dd HH:mm:ss'}}</div>
                                                </div>
                                                <div class="status-line" ng-if="item.change_logs.lease_close_date && item.status == 'closed'">
                                                    <div class="con-left">关闭时间:</div>
                                                    <div class="con-right">{{item.change_logs.lease_close_date | date: 'yyyy-MM-dd HH:mm:ss'}}</div>
                                                </div>
                                                <div class="status-line" ng-if="item.change_logs.lease_close_date && item.status == 'terminated'">
                                                    <div class="con-left">终止时间:</div>
                                                    <div class="con-right">{{item.change_logs.lease_close_date | date: 'yyyy-MM-dd HH:mm:ss'}}</div>
                                                </div>
                                                <div class="status-line" ng-if="item.status === 'matured'">
                                                    <div class="con-left">到期时间:</div>
                                                    <div class="con-right">{{item.end_date | date: 'yyyy-MM-dd HH:mm:ss'}}</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="link-txt" ng-if="currentAdmin.permissionMap[PERMISSION_LEASES_KEY]" ng-click="seeOrderDetail(item, 'agreement')">查看详情</div>
                                </div>
                            </div>
                        </div>
                        <div class="b-title tit-bot">
                        	<span class="blake-txt">合同负责人:</span>
                            <div class="blake-txt link-txt">
                                {{userOptions[item.supervisor].name}}
                                <div class="u-box just-show">
                                    <img ng-src="{{userOptions[item.supervisor].avatar}}" class="u-ava">
                                    <div class="u-nick">{{userOptions[item.supervisor].name}}</div>
                                    <div class="u-info">
                                        <span ng-if="userOptions[item.supervisor].phone">{{userOptions[item.supervisor].phone}}</span>
                                        <span ng-if="userOptions[item.supervisor].email">{{userOptions[item.supervisor].email}}</span>
                                    </div>
                                </div>
                            </div>
                            <span class="blake-txt f-right">已出账单总金额: {{item.pushed_lease_bills_fees}} 元</span>
                        </div>
                    </div>
                    <div class="nodata" ng-if="leasesList.length <= 0 && loaded">无长租合同</div>
                </div>

                <div class="s-info-page p25" ng-if="tabType === 'longrent'">
                    <div class="line-width info-tit" ng-if="appointmentList.length > 0">
                        <div class="line-item per32 t-left">空间</div>
                        <div class="line-item per19 t-left">承租方</div>
                        <div class="line-item per19">起租日</div>
                        <div class="line-item per9_5">月数</div>
                        <div class="line-item per9_5">租金</div>
                        <div class="line-item per11">操作</div>
                    </div>
                    <div class="space-b-box" ng-repeat="item in appointmentList">
                        <div class="b-title tit-top">
                            <span class="blake-txt">预约号：{{item.appointment_number}}</span>
                            <span class="f-right">{{item.creation_date | date: 'yyyy-MM-dd'}}</span>
                        </div>
                        <div class="line-width">
                            <div class="line-item per32 t-left">
                                <div class="item-con">
                                    <div class="p-w-t">
                                        <div class="p-p">
                                            <img ng-src="{{item.product.room.attachment[0].attachment_id.content}}">
                                        </div>
                                        <div class="p-t">
                                            <div class="p-t-top hover" ng-click="seeRoomDetail(item.product)">
                                                {{item.product.room.building.name}}, {{item.product.room.name}}
                                            </div>
                                            <div class="p-t-bot">
                                                <span class="detail-tag red" ng-if="item.product.room.type !== 'longterm'">秒</span>
                                                <span class="detail-tag ora" ng-if="item.product.room.type === 'longterm'">长</span>
                                                <span>{{roomTypeDesc[item.product.room.type].description}}</span>
                                                <span class="detail-tag green" ng-if="item.appointed">指</span>
                                                <span ng-if="item.appointed" ng-bind="userOptions[item.appointed].name"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="line-item per19 t-left">
                                <div class="item-con">
                                    <div ng-bind="item.applicant_company"></div>
                                    <div class="link-txt" ng-bind="item.applicant_email"></div>
                                    <div class="link-txt" ng-bind="item.applicant_phone"></div>
                                </div>
                            </div>
                            <div class="line-item per19">
                                <div class="item-con">
                                    <div>{{item.start_rent_date | date: 'yyyy-MM-dd'}}</div>
                                </div>
                            </div>
                            <div class="line-item per9_5">
                                <div class="item-con">
                                    <div ng-bind="item.rent_time_length"></div>
                                </div>
                            </div>
                            <div class="line-item per9_5">
                                <div class="item-con">
                                    <div>{{::item.product.base_price}}元/{{unitDesc[item.product.unit_price]}}起</div>
                                </div>
                            </div>
                            <div class="line-item per11 last-box">
                                <div class="item-con">
                                    <div class="status">
                                        <span class="status-txt" ng-bind="appointmentOrderStatus[item.status]"></span>
                                        <div class="status-box">
                                            <div class="status-head">
                                                预约申请历史状态记录
                                            </div>
                                            <div class="status-con">
                                                <div class="status-line">
                                                    <div class="con-left">申请时间:</div>
                                                    <div class="con-right">{{item.creation_date | date: 'yyyy-MM-dd HH:mm:ss'}}</div>
                                                </div>
                                                <div class="status-line" ng-if="item.status !== 'pending'">
                                                    <div class="con-left" ng-if="item.status === 'accepted'">同意时间:</div>
                                                    <div class="con-left" ng-if="item.status === 'rejected'">拒绝时间:</div>
                                                    <div class="con-left" ng-if="item.status === 'withdrawn'">撤销时间:</div>
                                                    <div class="con-right">{{item.modification_date | date: 'yyyy-MM-dd HH:mm:ss'}}</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="link-txt" ng-click="seeOrderDetail(item, 'longrent')" ng-if="item.lease_id && item.status === 'accepted' && currentAdmin.permissionMap[PERMISSION_LEASES_KEY]">查看合同</div>
                                </div>
                            </div>
                        </div>
                        <div class="b-title tit-bot">
                            <span class="blake-txt">预约人:</span>
                            <div class="blake-txt link-txt">
                                {{userOptions[item.user_id].name}}
                                <div class="u-box just-show">
                                    <img ng-src="{{userOptions[item.user_id].avatar}}" class="u-ava">
                                    <div class="u-nick">{{userOptions[item.user_id].name}}</div>
                                    <div class="u-info">
                                        <span ng-if="userOptions[item.user_id].phone">{{userOptions[item.user_id].phone}}</span>
                                        <span ng-if="userOptions[item.user_id].email">{{userOptions[item.user_id].email}}</span>
                                    </div>
                                </div>
                            </div>
                            <span class="blake-txt f-right">预约总租金: {{::item.product.base_price * item.rent_time_length}} 元起</span>
                        </div>
                    </div>
                    <div class="nodata" ng-if="appointmentList.length <= 0 && loaded">无长租申请</div>
                </div>

                <div class="s-info-page p25" ng-if="tabType === 'event'">
                    <div class="line-width info-tit" ng-if="eventList.length > 0">
                        <div class="line-item per32 t-left">
                            活动
                        </div>
                        <div class="line-item per19">
                            活动时间
                        </div>
                        <div class="line-item per19">
                            活动地点
                        </div>
                        <div class="line-item per9_5">
                            发起公司
                        </div>
                        <div class="line-item per9_5">
                            购买者
                        </div>
                        <div class="line-item per11">
                            操作
                        </div>
                    </div>
                    <div class="space-b-box" ng-repeat="item in eventList">
                        <div class="b-title tit-top">
                            <span class="blake-txt">订单号：{{item.order_number}}</span>
                            <span class="f-right" ng-bind="item.creation_date | date: 'yyyy-MM-dd'"></span>
                        </div>
                        <div class="line-width">
                            <div class="line-item per32 t-left">
                                <div class="item-con">
                                    <div class="p-w-t">
                                        <div class="p-p">
                                            <img ng-src="{{item.event.attachments[0].content}}">
                                        </div>
                                        <div class="p-t">
                                            <div class="p-t-top black hover" ng-click="seeEventDetail(item)">
                                                {{item.event.name}}
                                            </div>
                                            <div class="p-t-bot grey" trigger='hover' data-placement="bottom-left" data-content-template="js/features/transaction/partials/popover.html" data-auto-close="1" bs-popover>
                                                <div class="text-con">{{item.event.description}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="line-item per19">
                                <div class="item-con">
                                    <div trigger='hover' data-placement="bottom-left" data-content-template="js/features/transaction/partials/descPopover.html" data-auto-close="1" bs-popover>
                                        <div>{{item.minDate | date: 'yyyy-MM-dd'}}</div><div ng-if="item.minDate != item.maxDate">-</div>
                                        <div ng-if="item.minDate != item.maxDate">{{item.maxDate | date: 'yyyy-MM-dd'}}</div>
                                    </div>
                                </div>
                            </div>
                            <div class="line-item per19">
                                <div class="item-con">
                                    <div>{{item.event.address}}</div>
                                </div>
                            </div>
                            <div class="line-item per9_5">
                                <div class="item-con">
                                    <div>{{item.event.publish_company}}</div>
                                </div>
                            </div>
                            <div class="line-item per9_5">
                                <div class="item-con">
                                    <div>{{userOptions[item.user_id].name}}</div>
                                </div>
                            </div>
                            <div class="line-item per11 last-box">
                                <div class="item-con">
                                    <div class="status">
                                        <span class="status-txt">{{item.status.toUpperCase() | translate}}</span>
                                        <div class="status-box">
                                            <div class="status-head">
                                                订单历史状态记录
                                            </div>
                                            <div class="status-con">
                                                <div class="status-line">
                                                    <div class="con-left">下单时间:</div>
                                                    <div class="con-right">{{item.creation_date | date: 'yyyy-MM-dd HH:mm:ss'}}</div>
                                                </div>
                                                <div class="status-line">
                                                    <div class="con-left">付款时间:</div>
                                                    <div class="con-right">{{item.payment_date | date: 'yyyy-MM-dd HH:mm:ss'}}</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="link-txt" ng-if="currentAdmin.permissionMap[PERMISSION_EVENT_KEY]" ng-click="seeOrderDetail(item, 'event')">查看详情</div>
                                </div>
                            </div>
                        </div>
                        <div class="b-title tit-bot">
                            <span class="blake-txt f-right">实付款: {{::item.price | currency: '￥':2 }}</span>
                            <div class="detail-tag f-right" ng-class="{account: item.pay_channel == 'account',blue: item.pay_channel == 'alipay',green: item.pay_channel == 'wx'}">{{item.pay_channel | translate}}</div>
                        </div>
                    </div>
                    <div class="nodata" ng-if="eventList.length <= 0 && loaded">无活动订单</div>
                </div>

                <div class="s-info-page p25" ng-if="tabType === 'invoice'">
                        <div class="line-width info-tit" ng-if="invoiceList.length > 0">
                            <div class="line-item per10">
                                ID
                            </div>
                            <div class="line-item per13">
                                订单号/发票号
                            </div>
                            <div class="line-item per10">
                                订单金额
                            </div>
                            <div class="line-item per15">
                                公司抬头
                            </div>
                            <div class="line-item per15">
                                科目/类型
                            </div>
                            <div class="line-item per15">
                                快递信息
                            </div>
                            <div class="line-item per11">
                                状态
                            </div>
                            <div class="line-item per11">
                                操作
                            </div>
                        </div>
                        <div class="space-b-box" ng-repeat="item in invoiceList">
                            <div class="b-title tit-top">
                                <div class="blake-txt">申请发票用户：{{userOptions[item.user_id].name}}（<span ng-if="userOptions[item.user_id].phone">{{userOptions[item.user_id].phone}}</span><span ng-if="userOptions[item.user_id].email">{{userOptions[item.user_id].email}}</span>）</div>
                                <span class="f-right">申请开票时间：{{item.creation_date | date: 'yyyy-MM-dd'}}</span>
                            </div>
                            <div class="line-width">
                                <div class="line-item per10">
                                    <div class="item-con">
                                        <div>{{item.id}}</div>
                                    </div>
                                </div>
                                <div class="line-item per13">
                                    <div class="item-con">
                                        <div class="link-txt">{{orderNumbers[item.order_id].order_number}}</div>
                                        <div ng-if="item.invoice_number">{{item.invoice_number}}</div>
                                        <div ng-if="!item.invoice_number">-</div>
                                    </div>
                                </div>
                                <div class="line-item per10">
                                    <div class="item-con">
                                        <div class="primary_f">{{item.amount | currency: ''}}元</div>
                                    </div>
                                </div>
                                <div class="line-item per15">
                                    <div class="item-con">
                                        <div>{{item.invoice_profile.title}}</div>
                                    </div>
                                </div>
                                <div class="line-item per15">
                                    <div class="item-con">
                                        <div>{{item.invoice_category}}</div>
                                        <div>{{invoiceType[item.invoice_profile.invoice_type]}}</div>
                                    </div>
                                </div>
                                <div class="line-item per15">
                                    <div class="item-con">
                                        <div ng-if="item.status === 'pending' || item.status === 'cancelled' || item.status === 'cancelled_wait'">
                                            <div>{{item.address.name}}</div>
                                            <div>{{item.address.phone}}</div>
                                            <div>{{item.region}}{{item.address.detail_address}}</div>
                                        </div>
                                        <div ng-if="item.status === 'completed'">
                                            <div>{{item.consignee_name}}</div>
                                            <div>{{item.consignee_phone}}</div>
                                            <div>{{item.consignee_address}}</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="line-item per11">
                                    <div class="item-con">
                                        <div class="detail-tag" ng-class="{red: item.status == 'pending', grey: item.status == 'cancelled' || item.status == 'cancelled_wait',green: item.status == 'completed'}">{{invoiceStatus[item.status]}}</div>
                                    </div>
                                </div>
                                <div class="line-item per11 last-box">
                                    <div class="item-con">
                                        <div class="link-txt" ng-if="currentAdmin.permissionMap[PERMISSION_INVOICE_KEY]" ng-click="seeOrderDetail(item, 'invoice')">查看详情</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="nodata" ng-if="invoiceList.length <= 0">无发票信息</div>
                </div>

                <div class="s-info-page p25" ng-if="tabType === 'membership'">
                    <div class="line-width info-tit">
                        <div class="line-item per40 t-left">
                            会员卡
                        </div>
                        <div class="line-item per15">
                            单价
                        </div>
                        <div class="line-item per15">
                            有效期
                        </div>
                        <div class="line-item per15">
                            购买者
                        </div>
                        <div class="line-item per15">
                            操作
                        </div>
                    </div>
                    <div class="space-b-box" ng-repeat="item in membershipList">
                        <div class="b-title tit-top">
                            <span class="blake-txt">订单号：{{item.order_number}}</span>
                            <span class="f-right" ng-bind="item.creation_date | date: 'yyyy-MM-dd'"></span>
                        </div>
                        <div class="line-width">
                            <div class="line-item per40 t-left">
                                <div class="item-con">
                                    <div class="p-w-t">
                                        <div class="p-p">
                                            <img ng-src="{{item.card.background}}">
                                        </div>
                                        <div class="p-t">
                                            <div class="p-t-top black hover" ng-click="seeOrderDetail(item, 'memberDetail')">
                                                {{item.card.name}}
                                            </div>
                                            <div class="p-t-bot grey">
                                                <div class="text-con">{{item.specification}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="line-item per15">
                                <div class="item-con">
                                    <div>
                                        <div>{{item.price}}元</div>
                                    </div>
                                </div>
                            </div>
                            <div class="line-item per15">
                                <div class="item-con">
                                    <div>{{item.valid_period}}个月</div>
                                </div>
                            </div>
                            <div class="line-item per15">
                                <div class="item-con">
                                    <div class="link-txt">
                                        {{::userOptions[item.user].name}}
                                        <div class="u-box just-show">
                                            <img ng-src="{{userOptions[item.user].avatar}}" class="u-ava">
                                            <div class="u-nick">{{userOptions[item.user].name}}</div>
                                            <div class="u-info">
                                                <span ng-if="userOptions[item.user].phone">{{userOptions[item.user].phone}}</span>
                                                <span ng-if="userOptions[item.user].email">{{userOptions[item.user].email}}</span>
                                            </div>
                                            <span class="n-icon ic_msg" ng-click="generateChat(item.user, item.product.room.building.id)" ng-if="customerservice[item.product.room.building.id]"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="line-item per15 last-box">
                                <div class="item-con">
                                    <div class="status">
                                        <span class="status-txt">已完成</span>
                                        <div class="status-box">
                                            <div class="status-head">
                                                订单历史状态记录
                                            </div>
                                            <div class="status-con">
                                                <div class="status-line">
                                                    <div class="con-left">创建时间:</div>
                                                    <div class="con-right">{{item.creation_date | date: 'yyyy-MM-dd HH:mm:ss'}}</div>
                                                </div>
                                                <div class="status-line">
                                                    <div class="con-left">付款时间:</div>
                                                    <div class="con-right">{{item.payment_date | date: 'yyyy-MM-dd HH:mm:ss'}}</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="link-txt" ng-click="seeOrderDetail(item, 'membership')">查看详情</div>
                                </div>
                            </div>
                        </div>
                        <div class="b-title tit-bot">
                            <span class="blake-txt f-right">实付款: {{::item.price | currency: '￥':2 }}</span>
                            <div class="detail-tag f-right" ng-class="{account: item.pay_channel == 'account',blue: item.pay_channel == 'alipay',green: item.pay_channel == 'wx'}">{{item.pay_channel | translate}}</div>
                        </div>
                    </div>
                </div>

                <pagination ng-if="tabType != 'userInfo'" option="pageOptions" on-page="goPage(index, tabType)"></pagination>
	        </div>
	    </div>
	</div>
</div>
